# Spec: monster-ai

## ADDED Requirements

### Requirement: 怪物以最近棋将为目标

怪物方回合内，每只怪物 SHALL 以“曼哈顿距离最近的存活棋将”为唯一目标；若存在多只等距棋将，SHALL 按既定规则（如行列序）选取其一。

#### Scenario: 选择最近棋将

- **WHEN** 轮到某怪物执行行为且场上存在至少一名存活棋将
- **THEN** 系统计算该怪物与所有存活棋将的曼哈顿距离，选取距离最小的棋将作为本回合目标；若可攻击到该棋将则优先执行攻击，否则执行移动

#### Scenario: 无棋将时无行为

- **WHEN** 轮到某怪物执行行为且场上无存活棋将
- **THEN** 该怪物本回合不执行任何行为；视为行为已用尽，继续下一只怪物

---

### Requirement: 能攻击则攻击，否则移动

怪物 SHALL 在可攻击到目标棋将时立即执行一次攻击（伤害为 1）；若当前不可攻击到目标棋将，则 SHALL 执行一次移动，向目标棋将方向移动一格（曼哈顿距离减少）。

#### Scenario: 可攻击时执行攻击

- **WHEN** 怪物与目标棋将的曼哈顿距离 ≤ 1（邻格），且怪物本回合仍有剩余行为
- **THEN** 怪物对该棋将造成 1 点伤害；消耗 1 次行为；若棋将死亡则从棋盘移除

#### Scenario: 不可攻击时执行移动

- **WHEN** 怪物与目标棋将的曼哈顿距离大于 1，且怪物本回合仍有剩余行为
- **THEN** 怪物向目标棋将方向移动一格（移动到使曼哈顿距离减 1 的合法空格）；消耗 1 次行为

#### Scenario: 怪物攻击距离与移动距离

- **WHEN** 判定怪物是否可攻击或可移动
- **THEN** 怪物攻击距离为 1（仅邻格）；怪物移动距离为 1（每步一格）；每回合每只怪物最多 2 次行为
